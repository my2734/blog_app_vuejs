{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport store from '@/store';\nimport axios from \"axios\";\nexport default {\n  name: \"LoginApp\",\n  data() {\n    return {\n      show_message_register: false,\n      user: {\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        repeat_password: \"\"\n      },\n      user_login: {\n        username: \"\",\n        password: \"\"\n      },\n      error_user_login: {\n        username: false,\n        username_content: \"\",\n        password: false,\n        password_content: \"\"\n      },\n      error_user_register: {\n        username: false,\n        password: false,\n        repeat_password: false,\n        email: false,\n        username_content: \"\",\n        password_content: \"\",\n        repeat_password_content: \"\",\n        email_content: \"\"\n      },\n      isErrorRegister: false,\n      isErrorLogin: false\n    };\n  },\n  methods: {\n    handleBackGoHome() {\n      this.$store.state.statusOverly = false;\n      this.$router.push({\n        path: \"/\"\n      });\n    },\n    validate_register() {\n      //\n    },\n    submit_register() {\n      const data = {\n        username: this.user.username,\n        password: this.user.password,\n        email: this.user.email\n      };\n      axios.post(\"http://localhost:8080/api/auth/register\", data).then(response => {\n        if (response.status == 200) {\n          this.user.username = \"\";\n          this.user.email = \"\";\n          this.user.password = \"\";\n          this.user.repeat_password = \"\";\n          this.show_message_register = true;\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    setCookie(cname, cvalue, exdays) {\n      const d = new Date();\n      d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n      let expires = \"expires=\" + d.toUTCString();\n      document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n    },\n    submit_login() {\n      const data = {\n        username: this.user_login.username,\n        password: this.user_login.password\n      };\n      // console.log(data)\n\n      axios.post(\"http://localhost:8080/api/auth/login\", data).then(response => {\n        const token = response.data.token;\n        const role = response.data.role;\n        // console.log(response.data)\n        this.setCookie(\"token\", token, '3d');\n        if (role == 0) {\n          store.commit('UPDATE_ADMIN', true);\n        }\n        store.commit('UPDATE_AUTH', true);\n        store.commit('UPDATE_AUTH_USERNAME', response.data.username);\n        this.user_login.username = \"\";\n        this.user_login.password = \"\";\n        // axios.get(\"http://localhost:8080/api/isAdmin/\"+token)\n        //   .then((response)=>{\n        //     if(response.status == 200){\n        //         this.$store.commit('TOGGLE_AUTH')\n        //     }              \n        //   })\n        this.$router.push({\n          name: 'home'\n        });\n      }).catch(() => {\n        alert(\"co loi roi\");\n      });\n    },\n    handleLoginUsername() {\n      if (!this.user_login.username) {\n        this.error_user_login.username_content = \"Vui lòng nhập username\";\n        this.error_user_login.username = true;\n      } else {\n        if (this.user_login.username.length < 6) {\n          this.error_user_login.username_content = \"Nhập ít nhất 6 kí tự\";\n          this.error_user_login.username = true;\n        } else {\n          this.error_user_login.username = false;\n        }\n      }\n    },\n    handleLoginPassword() {\n      if (!this.user_login.password) {\n        this.error_user_login.password_content = \"Vui lòng nhập password\";\n        this.error_user_login.password = true;\n      } else {\n        if (this.user_login.password.length < 6) {\n          this.error_user_login.password_content = \"Nhập ít nhất 6 kí tự\";\n          this.error_user_login.password = true;\n        } else {\n          this.error_user_login.password = false;\n        }\n      }\n    },\n    handleRegisterUsername() {\n      if (!this.user.username) {\n        this.error_user_register.username_content = \"Vui lòng nhập username\";\n        this.error_user_register.username = true;\n      } else {\n        if (this.user.username.length < 6) {\n          this.error_user_register.username_content = \"Nhập ít nhất 6 kí tự\";\n          this.error_user_register.username = true;\n        } else {\n          this.error_user_register.username = false;\n        }\n      }\n    },\n    handleRegisterPassword() {\n      if (!this.user.password) {\n        this.error_user_register.password_content = \"Vui lòng nhập password\";\n        this.error_user_register.password = true;\n      } else {\n        if (this.user.password.length < 6) {\n          this.error_user_register.password_content = \"Nhập ít nhất 6 kí tự\";\n          this.error_user_register.password = true;\n        } else {\n          this.error_user_register.password = false;\n        }\n      }\n    },\n    handleRegisterRepeatPassword() {\n      if (!this.user.repeat_password) {\n        this.error_user_register.repeat_password_content = \"Vui lòng nhập password\";\n        this.error_user_register.repeat_password = true;\n      } else {\n        if (this.user.repeat_password.length < 6) {\n          this.error_user_register.repeat_password_content = \"Nhập ít nhất 6 kí tự\";\n          this.error_user_register.repeat_password = true;\n        } else {\n          this.error_user_register.repeat_password = false;\n        }\n      }\n    },\n    handleRegisterEmail() {\n      if (!this.user.email) {\n        this.error_user_register.email_content = \"Vui lòng nhập email\";\n        this.error_user_register.email = true;\n      } else {\n        if (!this.user.email.includes(\"@\")) {\n          this.error_user_register.email_content = \"Nhập không đúng định dạng\";\n          this.error_user_register.email = true;\n        } else {\n          this.error_user_register.email = false;\n        }\n      }\n    },\n    getCookie(cname) {\n      let name = cname + \"=\";\n      let decodedCookie = decodeURIComponent(document.cookie);\n      let ca = decodedCookie.split(';');\n      for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n          c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n          return c.substring(name.length, c.length);\n        }\n      }\n      return \"\";\n    }\n  },\n  created() {\n    const token = this.getCookie('token');\n    if (token) {\n      axios.post('http://localhost:8080/api/verify', {\n        token: token\n      }).then(response => {\n        if (response.status == 200) {\n          if (response.data.role == 0) {\n            store.commit('UPDATE_ADMIN', true);\n          }\n          store.commit('UPDATE_AUTH', true);\n          store.commit('UPDATE_AUTH_USERNAME', response.data.username);\n        }\n      }).catch(() => {\n        console.log('Loi verify user');\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["store","axios","name","data","show_message_register","user","username","email","password","repeat_password","user_login","error_user_login","username_content","password_content","error_user_register","repeat_password_content","email_content","isErrorRegister","isErrorLogin","methods","handleBackGoHome","$store","state","statusOverly","$router","push","path","validate_register","submit_register","post","then","response","status","catch","error","console","log","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","document","cookie","submit_login","token","role","commit","alert","handleLoginUsername","length","handleLoginPassword","handleRegisterUsername","handleRegisterPassword","handleRegisterRepeatPassword","handleRegisterEmail","includes","getCookie","decodedCookie","decodeURIComponent","ca","split","i","c","charAt","substring","indexOf","created"],"sourceRoot":"","sources":["D:\\trainningVuejs\\blog_app_vuejs\\client\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n  <transition name=\"slide-fade\">\r\n    <div class=\"login-wrap\">\r\n      <div class=\"login-html\">\r\n        <div>\r\n          <a @click=\"handleBackGoHome()\" class=\"btn-back tab\"\r\n            ><i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i> Go Home</a\r\n          >\r\n          <!-- <router-link to=\"/\" class=\"btn-back tab\"><i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i> Go Home</router-link> -->\r\n        </div>\r\n        <input\r\n          id=\"tab-1\"\r\n          type=\"radio\"\r\n          name=\"tab\"\r\n          class=\"sign-in\"\r\n          checked\r\n        /><label for=\"tab-1\" class=\"tab\">Sign In</label>\r\n\r\n        <input id=\"tab-2\" type=\"radio\" name=\"tab\" class=\"sign-up\" /><label\r\n          for=\"tab-2\"\r\n          class=\"tab\"\r\n          >Sign Up</label\r\n        >\r\n\r\n        <div class=\"login-form\">\r\n          <div class=\"sign-in-htm\">\r\n            <div class=\"group\">\r\n              <label for=\"user\" class=\"label\">Username</label>\r\n              <input\r\n                @keyup=\"handleLoginUsername()\"\r\n                id=\"user\"\r\n                v-model=\"user_login.username\"\r\n                type=\"text\"\r\n                class=\"input\"\r\n              />\r\n              <transition name=\"slide-fade\">\r\n                <span v-show=\"error_user_login.username\">{{\r\n                  error_user_login.username_content\r\n                }}</span>\r\n              </transition>\r\n            </div>\r\n            <div class=\"group\">\r\n              <label for=\"pass\" class=\"label\">Password</label>\r\n              <input\r\n                @keyup=\"handleLoginPassword()\"\r\n                v-model=\"user_login.password\"\r\n                id=\"pass\"\r\n                type=\"password\"\r\n                class=\"input\"\r\n                data-type=\"password\"\r\n              />\r\n              <transition name=\"slide-fade\">\r\n                <span v-show=\"error_user_login.password\">{{\r\n                  error_user_login.password_content\r\n                }}</span>\r\n              </transition>\r\n            </div>\r\n            <div class=\"group\">\r\n              <input id=\"check\" type=\"checkbox\" class=\"check\" checked />\r\n              <label for=\"check\"\r\n                ><span class=\"icon\"></span> Keep me Signed in</label\r\n              >\r\n            </div>\r\n            <div class=\"group\">\r\n              <input\r\n                type=\"submit\"\r\n                @click=\"submit_login()\"\r\n                class=\"button\"\r\n                value=\"Sign In\"\r\n              />\r\n            </div>\r\n            <div class=\"hr\"></div>\r\n            <div class=\"foot-lnk\">\r\n              <a href=\"#forgot\">Forgot Password?</a>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"sign-up-htm\">\r\n            <h5 v-if=\"show_message_register\">Register sucess. Now Login!</h5>\r\n            <div class=\"group\">\r\n              <label for=\"user\" class=\"label\">Username</label>\r\n              <input\r\n                @keyup=\"handleRegisterUsername()\"\r\n                id=\"user\"\r\n                v-model=\"user.username\"\r\n                type=\"text\"\r\n                class=\"input\"\r\n              />\r\n              <transition name=\"slide-fade\">\r\n                <span v-show=\"error_user_register.username\">{{\r\n                  error_user_register.username_content\r\n                }}</span>\r\n              </transition>\r\n            </div>\r\n            <div class=\"group\">\r\n              <label for=\"pass\" class=\"label\">Password</label>\r\n              <input\r\n                @keyup=\"handleRegisterPassword()\"\r\n                id=\"pass\"\r\n                type=\"password\"\r\n                class=\"input\"\r\n                data-type=\"password\"\r\n                v-model=\"user.password\"\r\n              />\r\n              <transition name=\"slide-fade\">\r\n                <span v-show=\"error_user_register.password\">{{\r\n                  error_user_register.password_content\r\n                }}</span>\r\n              </transition>\r\n            </div>\r\n            <div class=\"group\">\r\n              <label for=\"pass\" class=\"label\">Repeat Password</label>\r\n              <input\r\n                @keyup=\"handleRegisterRepeatPassword()\"\r\n                id=\"pass\"\r\n                type=\"password\"\r\n                class=\"input\"\r\n                data-type=\"password\"\r\n                v-model=\"user.repeat_password\"\r\n              />\r\n              <transition name=\"slide-fade\">\r\n                <span v-show=\"error_user_register.repeat_password\">{{\r\n                  error_user_register.repeat_password_content\r\n                }}</span>\r\n              </transition>\r\n            </div>\r\n            <div class=\"group\">\r\n              <label for=\"pass\" class=\"label\">Email Address</label>\r\n              <input\r\n                @keyup=\"handleRegisterEmail()\"\r\n                id=\"pass\"\r\n                type=\"text\"\r\n                class=\"input\"\r\n                v-model=\"user.email\"\r\n              />\r\n              <transition name=\"slide-fade\">\r\n                <span v-show=\"error_user_register.email\">{{\r\n                  error_user_register.email_content\r\n                }}</span>\r\n              </transition>\r\n            </div>\r\n            <div class=\"group\">\r\n              <input\r\n                type=\"submit\"\r\n                @click=\"submit_register()\"\r\n                class=\"button\"\r\n                value=\"Sign Up\"\r\n              />\r\n            </div>\r\n            <div class=\"hr\"></div>\r\n            <div class=\"foot-lnk\">\r\n              <label for=\"tab-1\">Already Member?</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport store from '@/store'\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"LoginApp\",\r\n  data() {\r\n    return {\r\n      show_message_register: false,\r\n      user: {\r\n        username: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        repeat_password: \"\",\r\n      },\r\n      user_login: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n      error_user_login: {\r\n        username: false,\r\n        username_content: \"\",\r\n        password: false,\r\n        password_content: \"\",\r\n      },\r\n      error_user_register: {\r\n        username: false,\r\n        password: false,\r\n        repeat_password: false,\r\n        email: false,\r\n        username_content: \"\",\r\n        password_content: \"\",\r\n        repeat_password_content: \"\",\r\n        email_content: \"\",\r\n      },\r\n      isErrorRegister: false,\r\n      isErrorLogin: false,\r\n    };\r\n  },\r\n  methods: { \r\n    handleBackGoHome() {\r\n      this.$store.state.statusOverly = false;\r\n      this.$router.push({ path: \"/\" });\r\n    },\r\n    validate_register() {\r\n      //\r\n    },\r\n    submit_register() {\r\n      const data = {\r\n        username: this.user.username,\r\n        password: this.user.password,\r\n        email: this.user.email,\r\n      };\r\n\r\n      axios\r\n        .post(\"http://localhost:8080/api/auth/register\", data)\r\n        .then((response) => {\r\n          if(response.status ==200){\r\n            this.user.username = \"\"\r\n            this.user.email = \"\"\r\n            this.user.password = \"\"\r\n            this.user.repeat_password = \"\"\r\n            this.show_message_register = true;\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    setCookie(cname, cvalue, exdays) {\r\n      const d = new Date();\r\n      d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\r\n      let expires = \"expires=\" + d.toUTCString();\r\n      document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n    },\r\n    submit_login() {\r\n      const data = {\r\n        username: this.user_login.username,\r\n        password: this.user_login.password,\r\n      };\r\n      // console.log(data)\r\n\r\n      axios\r\n        .post(\"http://localhost:8080/api/auth/login\", data)\r\n        .then((response) => {\r\n          const token = response.data.token;\r\n          const role = response.data.role\r\n          // console.log(response.data)\r\n          this.setCookie(\"token\", token, '3d');\r\n          if(role == 0){\r\n            store.commit('UPDATE_ADMIN',true)\r\n          }\r\n          store.commit('UPDATE_AUTH',true)\r\n          store.commit('UPDATE_AUTH_USERNAME',response.data.username)\r\n\r\n          this.user_login.username=\"\"\r\n          this.user_login.password=\"\"\r\n          // axios.get(\"http://localhost:8080/api/isAdmin/\"+token)\r\n          //   .then((response)=>{\r\n          //     if(response.status == 200){\r\n          //         this.$store.commit('TOGGLE_AUTH')\r\n          //     }              \r\n          //   })\r\n          this.$router.push({name: 'home'})\r\n        })\r\n        .catch(() => {\r\n          alert(\"co loi roi\");\r\n        });\r\n    },\r\n    handleLoginUsername() {\r\n      if (!this.user_login.username) {\r\n        this.error_user_login.username_content = \"Vui lòng nhập username\";\r\n        this.error_user_login.username = true;\r\n      } else {\r\n        if (this.user_login.username.length < 6) {\r\n          this.error_user_login.username_content = \"Nhập ít nhất 6 kí tự\";\r\n          this.error_user_login.username = true;\r\n        } else {\r\n          this.error_user_login.username = false;\r\n        }\r\n      }\r\n    },\r\n    handleLoginPassword() {\r\n      if (!this.user_login.password) {\r\n        this.error_user_login.password_content = \"Vui lòng nhập password\";\r\n        this.error_user_login.password = true;\r\n      } else {\r\n        if (this.user_login.password.length < 6) {\r\n          this.error_user_login.password_content = \"Nhập ít nhất 6 kí tự\";\r\n          this.error_user_login.password = true;\r\n        } else {\r\n          this.error_user_login.password = false;\r\n        }\r\n      }\r\n    },\r\n    handleRegisterUsername() {\r\n      if (!this.user.username) {\r\n        this.error_user_register.username_content = \"Vui lòng nhập username\";\r\n        this.error_user_register.username = true;\r\n      } else {\r\n        if (this.user.username.length < 6) {\r\n          this.error_user_register.username_content = \"Nhập ít nhất 6 kí tự\";\r\n          this.error_user_register.username = true;\r\n        } else {\r\n          this.error_user_register.username = false;\r\n        }\r\n      }\r\n    },\r\n    handleRegisterPassword() {\r\n      if (!this.user.password) {\r\n        this.error_user_register.password_content = \"Vui lòng nhập password\";\r\n        this.error_user_register.password = true;\r\n      } else {\r\n        if (this.user.password.length < 6) {\r\n          this.error_user_register.password_content = \"Nhập ít nhất 6 kí tự\";\r\n          this.error_user_register.password = true;\r\n        } else {\r\n          this.error_user_register.password = false;\r\n        }\r\n      }\r\n    },\r\n    handleRegisterRepeatPassword() {\r\n      if (!this.user.repeat_password) {\r\n        this.error_user_register.repeat_password_content =\r\n          \"Vui lòng nhập password\";\r\n        this.error_user_register.repeat_password = true;\r\n      } else {\r\n        if (this.user.repeat_password.length < 6) {\r\n          this.error_user_register.repeat_password_content =\r\n            \"Nhập ít nhất 6 kí tự\";\r\n          this.error_user_register.repeat_password = true;\r\n        } else {\r\n          this.error_user_register.repeat_password = false;\r\n        }\r\n      }\r\n    },\r\n    handleRegisterEmail() {\r\n      if (!this.user.email) {\r\n        this.error_user_register.email_content = \"Vui lòng nhập email\";\r\n        this.error_user_register.email = true;\r\n      } else {\r\n        if (!this.user.email.includes(\"@\")) {\r\n          this.error_user_register.email_content = \"Nhập không đúng định dạng\";\r\n          this.error_user_register.email = true;\r\n        } else {\r\n          this.error_user_register.email = false;\r\n        }\r\n      }\r\n    },\r\n    getCookie(cname) {\r\n            let name = cname + \"=\";\r\n            let decodedCookie = decodeURIComponent(document.cookie);\r\n            let ca = decodedCookie.split(';');\r\n            for(let i = 0; i <ca.length; i++) {\r\n                let c = ca[i];\r\n                while (c.charAt(0) == ' ') {\r\n                c = c.substring(1);\r\n                }\r\n                if (c.indexOf(name) == 0) {\r\n                return c.substring(name.length, c.length);\r\n                }\r\n            }\r\n            return \"\";\r\n        }\r\n  },\r\n  created(){\r\n    const token = this.getCookie('token')\r\n        if(token){\r\n            axios.post('http://localhost:8080/api/verify',{token:token})\r\n            .then(response=>{\r\n                if(response.status == 200){\r\n                    if(response.data.role == 0){\r\n                        store.commit('UPDATE_ADMIN',true)\r\n                    }\r\n                    store.commit('UPDATE_AUTH',true)\r\n                    store.commit('UPDATE_AUTH_USERNAME',response.data.username)\r\n                }\r\n            })\r\n            .catch(()=>{\r\n                console.log('Loi verify user')\r\n            })\r\n        }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.login-html {\r\n  padding-top: 70px !important;\r\n}\r\n.login-wrap {\r\n  margin-top: 40px !important;\r\n  margin-bottom: 40px !important;\r\n}\r\n\r\n.slide-fade-enter-active {\r\n  transition: all 0.3s ease;\r\n}\r\n.slide-fade-leave-active {\r\n  transition: all 0.8s cubic-bezier(1, 0.5, 0.8, 1);\r\n}\r\n.slide-fade-enter, .slide-fade-leave-to\r\n  /* Trước 2.1.8 thì dùng .slide-fade-leave-active */ {\r\n  transform: translateY(-100%);\r\n  opacity: 0;\r\n}\r\n\r\n.btn-back {\r\n  border: none;\r\n  background: transparent;\r\n  color: #fff;\r\n  font-size: 18px;\r\n  text-transform: capitalize;\r\n  cursor: pointer;\r\n}\r\n\r\n.slide-fade-enter-active {\r\n  transition: all 0.3s ease-out;\r\n}\r\n\r\n.slide-fade-leave-active {\r\n  transition: all 0.8s cubic-bezier(1, 0.5, 0.8, 1);\r\n}\r\n\r\n.slide-fade-enter-from,\r\n.slide-fade-leave-to {\r\n  transform: translateX(20px);\r\n  opacity: 0;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}